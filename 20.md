# A Closer Look at the Script

We want to give a little more detail about a few things in the script. Look first at the `GPIO.setwarnings()` line. If a GPIO script has been interrupted, the next script you run may cause this warning because the system thinks the crashed program still is using the GPIO service. It’s only a warning and does not stop the script, but this line stops this minor annoyance.

Also, the `GPIO.cleanup()` command (the last line in the script) cleans up by releasing the GPIO to prevent the warning we just discussed. It’s good programming practice to include in your scripts.

#### Example of Using Input

Using a pin for output is perhaps not as simple as it might appear. When a pin is set to input, pressing a switch connected from the pin to ground closes a circuit and you get an input, right? The problem is that in actual use, the Raspberry Pi can become confused about whether a switch is open or closed. This phenomenon is called _floating_.

Input pins actually have three states—on, off and floating (where the logic is not clear). For practical results in using input logic, we need the Raspberry Pi detecting on or off states (true or false) only.

A solution to this problem of three states involves providing “pull up” and “pull down” reference voltages so the Raspberry Pi knows definitely when it gets an input. GPIO pins have an internal pull-up/pull-down resistor that can be enabled via programming, such as in a Python script.

---

> [!NOTE]

_Pull up_ means the switch or other input device connects to the negative end of the pull-up resistor. _Pull down_ hooks the device to the positive end. A diagram of pull up and pull down is shown in Figure 12-16.

![[FIGURE 12-16:](#15_9781119183938-ch12.xhtml#rc12-fig-0016) Pull up (top) and pull down (bottom)](./media/images/9781119183938-fg1216.png)

In [Figure 12-16](#15_9781119183938-ch12.xhtml#c12-fig-0016), Vcc refers to a positive voltage supply. This would be 3.3 VDC on the Raspberry Pi. Because this connection and the pull-up resistor are internal, all that’s required of you is a line in Python when you want to use a pin as an input.

For example, we can write a script detecting the press of a button like this:

```
## Input Using Pullup #############################################
import RPi.GPIO as GPIO                    ## Import GPIO library
import time                                ## Need this for delay
GPIO.setmode(GPIO.BOARD)                   ## Use board pin numbering
` 

GPIO.setup(15, GPIO.IN)
                                           ## Set pin 15 to input with pullup
` 

## Let us know whenever button is pressed, please #################
` 

print "Push this button"
while True:
     button_pressed = GPIO.input(15)
     if button_pressed == False:
          print("DING DONG, button pressed!")
          time.sleep(0.3)
` 

GPIO.cleanup                           ## End program gracefully
```

The physical circuit using alligator clips or on a breadboard is minimal to construct. Run a jumper wire from pin 15 to one side of the switch and run another jumper wire from the other side of the switch to ground. Run the script, press the button three times and you get the following output:

```
Push this button
DING DONG, button pressed!
DING DONG, button pressed!
DING DONG, button pressed!
```

### Alternative Modes

In the previous section we mentioned the alternative modes of the GPIO pins. Theoretically, there can be up to six alternative uses of a particular pin. The ALT functions are pin dependent. You can set individual pins to be in different ALT modes at any given time. In other words, not all pins need to be in ALT 1 mode at the same time; some pins can be in ALT 0 mode and a couple of others can be in ALT 4 mode.

---

> [!TIP]

The “Raspberry Pi GPIO Pin Alternative Functions” article ([`www.dummies.com/how-to/content/raspberry-pi-gpio-pin-alternative-functions.html`](http://www.dummies.com/how-to/content/raspberry-pi-gpio-pin-alternate-functions.html)) is good reading for a fast start in using alternative modes. Also check out the Broadcom documentation for the 2835 and 2836 (the latter is for the Raspberry Pi 2 Model B) for more detailed information.

For the aforementioned detailed information concerning the 2835 chip, download the Broadcom 205-page PDF at [`www.alldatasheet.com/datasheet-pdf/pdf/502533/BOARDCOM/BCM2835.html`](http://www.alldatasheet.com/datasheet-pdf/pdf/502533/BOARDCOM/BCM2835.html). Evidently, this level of detail is not available yet for the 2836.

### GPIO Experimentation the Easy Way

We should mention that when using jumper cables on something as crowded with pins as P1, the GPIO header is a pin. Also you need to take great care to avoid shorts. Using such aids as breakout boards, breadboards and prototyping boards—many of which are available at low cost from major online retailers—offers a better solution.

These boards have connectors that plug into P1, and the additional board gives you much more room for adding jumpers, resistors and other components.

# WILEY END USER LICENSE AGREEMENT

Go to [www.wiley.com/go/eula](http://www.wiley.com/go/eula) to access Wiley’s ebook EULA.
